# 生产示例配置：复制后替换尖括号内容，不要提交秘钥。
Name: znp.prod
Host: 0.0.0.0
Port: 8888
Timeout: 60000

Project:
  Name: Zero Network Panel
  Description: Production deployment
  Version: 1.0.0

Site:
  Name: Zero Network Panel
  LogoURL: ""                         # 可选：站点 Logo URL

Database:
  Driver: mysql           # 可选 mysql/postgres/sqlite
  DSN: "<user>:<pass>@tcp(db:3306)/znp?parseTime=true&loc=Local"  # 必填：生产 DSN
  MaxOpenConns: 50
  MaxIdleConns: 25
  ConnMaxLifetime: 600s
  LogLevel: warn          # trace/debug/info/warn/error/silent

Cache:
  Provider: memory        # 多副本时改为 redis 并填写 Host/Password
  Memory:
    Size: 2048
  Redis:
    Host: ""
    Type: node
    Password: ""
    TLS: false
    NonBlock: false
    PingTimeout: 0s

CORS:
  Enabled: true
  AllowOrigins:
    - "https://panel.example.com"
  AllowHeaders:
    - X-ZNP-API-Key
    - X-ZNP-Timestamp
    - X-ZNP-Nonce
    - X-ZNP-Signature
    - X-ZNP-Encrypted
    - X-ZNP-IV

Auth:
  AccessSecret: "<access-secret>"          # 必填：强随机字符串
  AccessExpire: 24h
  RefreshSecret: "<refresh-secret>"        # 必填：强随机字符串
  RefreshExpire: 720h
  Registration:
    Enabled: false                         # 是否开放注册
    InviteOnly: true                       # 邀请制注册
    InviteCodes: []                        # 邀请码白名单
    DefaultRoles:
      - user
    RequireEmailVerification: true
  Verification:
    CodeLength: 6
    CodeTTL: 15m
    SendCooldown: 1m
    SendLimitPerHour: 5
  PasswordReset:
    CodeLength: 6
    CodeTTL: 15m
    SendCooldown: 1m
    SendLimitPerHour: 5
  PasswordPolicy:
    MinLength: 8
    MaxLength: 0
    RequireUpper: false
    RequireLower: false
    RequireDigit: false
    RequireSpecial: false
  Lockout:
    MaxAttempts: 5
    LockDuration: 15m
  Email:
    Provider: log                          # log 或 smtp
    From: "no-reply@example.com"
    SMTP:
      Host: ""
      Port: 587
      Username: ""
      Password: ""
      UseTLS: false

Credentials:
  MasterKey: "<credential-secret>"         # 必填：用户认证密钥派生主密钥

Metrics:
  Enable: true
  Path: /metrics
  ListenOn: ""                             # 为空则复用主 HTTP；如需分离可设 0.0.0.0:9100

Admin:
  RoutePrefix: admin
  Access:
    AllowCIDRs: []                 # 可选：["10.0.0.0/8","192.168.0.0/16"]
    RateLimitPerMinute: 120        # 可选：每 IP 每分钟限速，0 表示关闭
    Burst: 20                      # 可选：瞬时突发

Webhook:
  AllowCIDRs: []                   # 可选：允许支付回调来源 IP
  SharedToken: ""                  # 可选：通用回调密钥（X-ZNP-Webhook-Token）
  Stripe:
    SigningSecret: ""              # 可选：Stripe webhook signing secret
    ToleranceSeconds: 300

GRPCServer:
  Enable: false                            # 如需 gRPC 服务改为 true 并设置监听
  ListenOn: 0.0.0.0:8890
  Reflection: true
